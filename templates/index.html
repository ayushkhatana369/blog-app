{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block content %}
<h2>Blog Posts</h2>

{% if posts %}
    {% for post in posts %}
        <article>
            {% if post.image %}
    <img
        src="{{ url_for('static', filename='uploads/posts/' ~ post.image) }}"
        alt="{{ post.title }}"
        style="max-width:100%; border-radius:6px; margin-bottom:15px;"
    >
{% endif %}


            <h3>
                <a href="{{ url_for('post_detail', post_id=post.id) }}">
                    {{ post.title }}
                </a>
            </h3>

            {% if current_user.is_authenticated %}
                <small>
                    <a href="{{ url_for('edit_post', post_id=post.id) }}">Edit</a>
                </small><br>
            {% endif %}

            {% if post.category %}
                <small>
                    Category:
                    <a href="{{ url_for('category_view', name=post.category.name) }}">
                        {{ post.category.name }}
                    </a>
                </small><br>
            {% endif %}

            {% if post.tags %}
                <small>
                    Tags:
                    {% for tag in post.tags %}
                        <a href="{{ url_for('tag_view', name=tag.name) }}">
                            #{{ tag.name }}
                        </a>
                    {% endfor %}
                </small><br>
            {% endif %}

            <small>{{ post.created_at.strftime('%Y-%m-%d') }}</small><br>
<small>{{ post.reading_time() }}</small>


            <div>
    {{ post.excerpt(200) | markdown | safe }}
</div>

<a href="{{ url_for('post_detail', post_id=post.id) }}">
    Read more ‚Üí
</a>


        </article>
    {% endfor %}
{% else %}
    <p>No posts yet üòî</p>
{% endif %}

<!-- üìÑ Pagination -->
{% if pagination and pagination.pages > 1 %}
<div style="text-align:center; margin-top:30px;">

    {% if pagination.has_prev %}
        <a href="{{ url_for('index', page=pagination.prev_num) }}">
            ‚Üê Previous
        </a>
    {% endif %}

    <span style="margin: 0 15px;">
        Page {{ pagination.page }} of {{ pagination.pages }}
    </span>

    {% if pagination.has_next %}
        <a href="{{ url_for('index', page=pagination.next_num) }}">
            Next ‚Üí
        </a>
    {% endif %}

</div>
{% endif %}

{% endblock %}
